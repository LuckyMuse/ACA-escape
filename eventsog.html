<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Afro Events Search</title>
</head>

<body>
  <h1>Find Afro Events by City</h1>

  <input type="text" id="cityInput" placeholder="Enter city name">
  <button id="searchButton">Search for Afro Events</button>

  <div id="results"></div>

  <script>
    const searchButton = document.getElementById('searchButton');

    searchButton.addEventListener('click', function () {
      const city = document.getElementById('cityInput').value.trim();

      if (city) {
        searchAfroEvents(city);
      } else {
        alert('Please enter a city name.');
      }
    });

    function searchAfroEvents(city) {
      const apiKey = 'M9XikQZGe69Zth1vtg7m88V58i2csv3r'; // Replace with your Ticketmaster API key
      const url = 'https://app.ticketmaster.com/discovery/v2/events.json?keyword=afro&city=${city}&apikey=${apiKey}';

      fetch(url)
        .then(response => {
          if (!response.ok) {
            throw new Error('HTTP error! Status: ${response.status}');
          }
          return response.json();
        })
        .then(data => {
          if (data._embedded && data._embedded.events) {
            displayResults(data._embedded.events);
          } else {
            document.getElementById('results').innerHTML = 'No events found.';
          }
        })
        .catch(error => {
          console.error('Error:', error);
          document.getElementById('results').innerHTML = 'Error fetching events. Please try again later.';
        });
    }

    function displayResults(events) {
      const resultsDiv = document.getElementById('results');
      resultsDiv.innerHTML = ''; // Clear previous results

      events.forEach(event => {
        const eventDiv = document.createElement('div');
        eventDiv.innerHTML = `
          <h3>${event.name}</h3>
          <p>Date: ${event.dates.start.localDate}</p>
          <a href="${event.url}" target="_blank">More Info</a>
          <img src="${event.images[0].url}" alt="${event.name}" width="200">
          <hr>
        `;
        resultsDiv.appendChild(eventDiv);
      });
    }
  </script>
</body>

</html>