<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AfroEscape</title>
    <link rel="shortcut icon" href="https://media.licdn.com/dms/image/v2/D5622AQFGSYr2Ca62uA/feedshare-shrink_800/feedshare-shrink_800/0/1692714257810?e=1731542400&v=beta&t=bIRgv39gTakXR93i6OTwNJ_Xd8dwSiBHshbb-Gxt-uk" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="stylesheet" href="/styles/styles.css">
    <script src="https://kit.fontawesome.com/7c2aa39bd5.js" crossorigin="anonymous"></script>
</head>


<body>
    <header>
        <img src="/assets/img/bgn logo.png" alt="Logo" class="logo">
        <h1 class="company-name">AfroEscape</h1>
        <a href="collab.html"><button class="sign">Collaborate </button></a>
        <button class="log-in">Share </button>
    </header>

 
  <div id="type-container">
    <h2>Choose your adventure!</h2>
    <div class="btns">
        <button class="btn btn-primary btn-lg" id="casual-btn">Casual</button>
        <button class="btn btn-secondary btn-lg" id="cultural-btn">Cultural</button>
        <button class="btn btn-secondary btn-lg" id="random-btn">Randomise</button>
    </div>
</div> 
<div id="find-afro-events">
<h1>Find Afro Events by City</h1>

<input type="text" id="cityInput" placeholder="Enter city name">
<button id="searchButton">Search for Afro Events</button>
</div>

<div id="results"></div>

<script>
  const searchButton = document.getElementById('searchButton');

  searchButton.addEventListener('click', function () {
    const city = document.getElementById('cityInput').value.trim();

    if (city) {
      searchAfroEvents(city);
    } else {
      alert('Please enter a city name.');
    }
  });

  function searchAfroEvents(city) {
    const apiKey = 'M9XikQZGe69Zth1vtg7m88V58i2csv3r'; // Replace with your Ticketmaster API key
    const url = `https://app.ticketmaster.com/discovery/v2/events.json?keyword=afro&city=${city}&apikey=${apiKey}`;

    fetch(url)
      .then(response => {
        if (!response.ok) {
          throw new Error(`HTTP error! Status: 
          ${response.status}`);
        }
        return response.json();
      })
      .then(data => {
        if (data._embedded && data._embedded.events) {
          displayResults(data._embedded.events);
        } else {
          document.getElementById('results').innerHTML = 'No events found.';
        }
      })
      .catch(error => {
        console.error('Error:', error);
        document.getElementById('results').innerHTML = 'Error fetching events. Please try again later.';
      });
  }

  function displayResults(events) {
    const resultsDiv = document.getElementById('results');
    resultsDiv.innerHTML = ''; // Clear previous results

    events.forEach(event => {
      const eventDiv = document.createElement('div');
      eventDiv.innerHTML = `
        <h3>${event.name}</h3>
        <p>Date: ${event.dates.start.localDate}</p>
        <a href="${event.url}" target="_blank">More Info</a>
        <img src="${event.images[0].url}" alt="${event.name}" width="200">
        <hr>
      `;
      resultsDiv.appendChild(eventDiv);
    });
  }
</script>
</body>

</html>